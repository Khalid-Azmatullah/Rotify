<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="index.css">
</head>
<body style="font-family:Verdana;">

<div style="background-color:#f1f1f1;padding:15px;">
  <h1>Rotify</h1>
  <h3>Music for Everyone</h3>
</div>

<div style="overflow:auto">
  <div class="menu">
    <div class="menuitem"><h4>Search available songs:</h4></div>
    <input type="text" id="myInput" onkeyup="myFunction()" placeholder= "Search  "  title="Type in a name">
    <div id="sg_list"> <div class="menuitem" id="#Afusic - Pal Pal (Official Music Video) Prod. @AliSoomroMusic">Afusic - Pal Pal (Official Music Video) Prod. @AliSoomroMusic</div> 
<div class="menuitem" id="#Coke Studio  Season 14  Pasoori  Ali Sethi x Shae Gill">Coke Studio  Season 14  Pasoori  Ali Sethi x Shae Gill</div> 
<div class="menuitem" id="#Excuses (Official Video)  AP Dhillon  Gurinder Gill  Intense">Excuses (Official Video)  AP Dhillon  Gurinder Gill  Intense</div> 
<div class="menuitem" id="#Harrdy Sandhu - Bijlee Bijlee ft Palak Tiwari  Jaani  BPraak  Arvindr Khaira  Desi Melodies">Harrdy Sandhu - Bijlee Bijlee ft Palak Tiwari  Jaani  BPraak  Arvindr Khaira  Desi Melodies</div> 
<div class="menuitem" id="#Jhol  Coke Studio Pakistan  Season 15  Maanu x Annural Khalid">Jhol  Coke Studio Pakistan  Season 15  Maanu x Annural Khalid</div> 
<div class="menuitem" id="#Murder (Official Video) Real Boss  New Punjabi Songs 2022  Latest Punjabi Songs 2022 ">Murder (Official Video) Real Boss  New Punjabi Songs 2022  Latest Punjabi Songs 2022 </div> 
<div class="menuitem" id="#Shubh - Cheques (Official Music Video)">Shubh - Cheques (Official Music Video)</div> 
<div class="menuitem" id="#Shubh - One Love (Official Audio)">Shubh - One Love (Official Audio)</div> 
<div class="menuitem" id="#SUNIYAN SUNIYAN (Official Video) Juss x MixSingh">SUNIYAN SUNIYAN (Official Video) Juss x MixSingh</div> 
<div class="menuitem" id="#WAVY (OFFICIAL VIDEO) KARAN AUJLA  LATEST PUNJABI SONGS 2024">WAVY (OFFICIAL VIDEO) KARAN AUJLA  LATEST PUNJABI SONGS 2024</div> 
    </div>

  </div>

  <div class="main">    
    <h2>The Walk</h2>
    <p>Music has a profound ability to connect people across cultures, transcend barriers, and evoke deep emotions. It serves as a universal language that can heal, inspire, and bring comfort, offering a form of expression that words alone often cannot capture. Given its transformative power, music should be accessible to everyone, regardless of their background or financial situation. When music is made available for free, it levels the playing field, allowing all individuals to explore their creativity, find solace, or experience joy through sound. It nurtures the soul, encourages social connection, and fosters a sense of shared humanity, reminding us that art, in all its forms, should be a right and not a privilege. By ensuring music is free, we embrace its ability to unite, educate, and uplift society as a whole.</p>
  </div>

  <div class="right">
    <h2>What?</h2>
    <p>A Web Player.</p>
    <h2>Where?</h2>
    <p>Anywhere you could dream of.</p>
    <h2>Price?</h2>
    <p>Free!</p>
  </div>
</div>


<div style="background-color:#f1f1f1;text-align:center;padding:10px;margin-top:7px;font-size:12px;"> This web page is a part of a demonstration of independent design.</div>

<div class="player">
    <audio controls style="width: 100%" id="audio_p">
        <source id="player" src="test.m4a" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
</div>


<script>
    function myFunction() {
    var input, filter, ul, li, a, i, txtValue;
    input = document.getElementById("myInput");
    filter = input.value.toUpperCase();
    ul = document.getElementById("sg_list");
    li = ul.getElementsByClassName("menuitem");
    for (i = 0; i < li.length; i++) {
        txtValue = li[i].textContent || li[i].innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
            li[i].style.display = "";
        } else {
            li[i].style.display = "none";
        }
    }
}

const source = document.getElementById('player');
const divs = document.querySelectorAll('.menuitem');
const audioPlayer = document.getElementById('audio_p');

///

const tracks = [
  {
    src: 'Afusic - Pal Pal (Official Music Video) Prod. @AliSoomroMusic.m4a',
    title: 'Afusic - Pal Pal (Official Music Video) Prod. @AliSoomroMusic',
    artist: 'Unkown'
  },
  {
    src: 'Coke Studio  Season 14  Pasoori  Ali Sethi x Shae Gill.m4a',
    title: 'Coke Studio  Season 14  Pasoori  Ali Sethi x Shae Gill',
    artist: 'Unkown'
  },
  {  
    src: 'Excuses (Official Video)  AP Dhillon  Gurinder Gill  Intense.m4a',
    title: 'Excuses (Official Video)  AP Dhillon  Gurinder Gill  Intense',
    artist: 'Unkown'
  },
  {
    src: 'Harrdy Sandhu - Bijlee Bijlee ft Palak Tiwari  Jaani  BPraak  Arvindr Khaira  Desi Melodies.m4a',
    title: 'Harrdy Sandhu - Bijlee Bijlee ft Palak Tiwari  Jaani  BPraak  Arvindr Khaira  Desi Melodies',
    artist: 'Unkown'
   }
  ]


// Loop through each div and add a click event listener
divs.forEach(div => {
  div.addEventListener('click', function() {
    let newSrc = this.id;
    newSrc = newSrc.slice(1);
    const index = tracks.findIndex(track => track.title === newSrc);
    skipTrack(0, currentTrackIndex=index)
  });
});


let currentTrackIndex = 0;

function updateMediaSession() {
  if ('mediaSession' in navigator) {
    navigator.mediaSession.metadata = new MediaMetadata({
      title: tracks[currentTrackIndex].title,
      artist: tracks[currentTrackIndex].artist,
      // artwork: [
      //   { src: 'artwork.jpg', sizes: '96x96', type: 'image/jpeg' },
      //   { src: 'artwork.jpg', sizes: '128x128', type: 'image/jpeg' },
      //   { src: 'artwork.jpg', sizes: '192x192', type: 'image/jpeg' }
      // ]
    });

    navigator.mediaSession.setActionHandler('play', () => audioPlayer.play());
    navigator.mediaSession.setActionHandler('pause', () => audioPlayer.pause());
    navigator.mediaSession.setActionHandler('previoustrack', () => skipTrack(-1));
    navigator.mediaSession.setActionHandler('nexttrack', () => skipTrack(1));
  }
}

function skipTrack(direction, currentTrackIndex=0) {
  currentTrackIndex = (currentTrackIndex + direction + tracks.length) % tracks.length
  audioPlayer.src = 'Songs/' + tracks[currentTrackIndex].src;
  audioPlayer.play();
  updateMediaSession();
}

audioPlayer.addEventListener('play', updateMediaSession);
audioPlayer.addEventListener('pause', updateMediaSession);
audioPlayer.addEventListener('ended', () => skipTrack(1));
</script>
</body>
</html>

